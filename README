<div align="center">RIFT â€” Web3 Video Ad PlatformDecentralized Ad-Based Video Platform on AlgorandCreators upload. Viewers watch. Advertisers fund. Everyone earns â€” transparently on-chain.</div>ğŸ“ System ArchitectureCode snippetflowchart TD
    UI[Frontend: React + Vite<br>Vercel Deployment] -->|Pera Wallet Connect| API[FastAPI Backend<br>Hugging Face Space]
    
    subgraph Backend Services
        API --> AUTH[JWT Auth & Signatures]
        API --> TRACK[View Tracking]
        API --> REWARD[Reward Aggregation]
    end

    API -->|Reward Ledger| ALGO[Algorand Network]
    API -->|Video Files| IPFS[Pinata IPFS]
    API -->|Metadata & Views| DB[(PostgreSQL DB)]
ğŸ” Authentication FlowWallet-based authentication using Algorand signature verification â€” no passwords, no emails.Code snippetsequenceDiagram
    participant B as Browser
    participant W as Pera Wallet
    participant API as Backend API

    B->>W: 1. Connect Wallet
    W-->>B: 2. Return Wallet Address
    B->>API: 3. POST /auth/challenge (wallet_address)
    API-->>B: 4. Return Challenge Message
    B->>W: 5. Request Signature for Message
    W-->>B: 6. Return Signature
    B->>API: 7. POST /auth/login (or signup)
    API-->>B: 8. Verify Signature & Issue JWT
StepActionDescription1Connect WalletUser connects Pera Wallet in the browser.2Get AddressFrontend receives the wallet address.3Request ChallengePOST /auth/challenge with wallet_address.4Receive MessageBackend returns a unique signable message.5â€“6Sign MessagePera Wallet signs the challenge message.7AuthenticatePOST /auth/signup (new user) or /auth/login (existing).8JWT IssuedBackend verifies the Algorand signature and returns a JWT.ğŸ–¥ Frontend IntegrationInstall DependenciesBashnpm install @perawallet/connect algosdk axios
Authentication Logic ExampleJavaScriptimport { PeraWalletConnect } from "@perawallet/connect";
import axios from "axios";

const peraWallet = new PeraWalletConnect();
const BASE_URL = import.meta.env.VITE_API_BASE_URL;

export async function connectWallet() {
  const accounts = await peraWallet.connect();
  return accounts[0]; // primary wallet address
}

export async function getChallenge(wallet) {
  const res = await axios.post(`${BASE_URL}/auth/challenge`, { wallet_address: wallet });
  return res.data.message;
}

export async function signMessage(message, wallet) {
  const encoded = new TextEncoder().encode(message);
  const signed = await peraWallet.signData([{ data: encoded, signers: [wallet] }]);
  return signed[0];
}

export async function login(wallet, signature, message) {
  const res = await axios.post(`${BASE_URL}/auth/login`, {
    wallet_address: wallet,
    signature,
    message,
  });
  localStorage.setItem("token", res.data.access_token);
}
ğŸ¥ Video Upload Flow (Pinata IPFS)Code snippetflowchart LR
    A[Frontend] -->|Upload| B[Backend]
    B -->|Pin| C[Pinata IPFS]
    C -->|Return CID| D[Backend]
    D -->|Store CID| E[(Database)]
Backend (Pinata Upload)Pythonimport requests

PINATA_API_KEY = "..."
PINATA_SECRET = "..."

def upload_to_pinata(file):
    url = "https://api.pinata.cloud/pinning/pinFileToIPFS"
    headers = {
        "pinata_api_key": PINATA_API_KEY,
        "pinata_secret_api_key": PINATA_SECRET,
    }
    response = requests.post(url, files={"file": file}, headers=headers)
    return response.json()["IpfsHash"]
Video Playback URL format: https://gateway.pinata.cloud/ipfs/<CID>ğŸ’° Reward SystemEconomic ActorsRoleEarns FromPaysCreatorViews + Ad Revenueâ€”ViewerFuture token rewards (optional)â€”Advertiserâ€”Campaign budgetPlatform5% fee on settlementsâ€”Calculation & Settlement FlowPythoncreator_reward = valid_views * reward_per_view
platform_fee   = creator_reward * 0.05
net_creator    = creator_reward - platform_fee
Code snippetflowchart LR
    A[Views Tracked in DB] -->|Periodically| B[Settlement Engine]
    B -->|Aggregate Views| C[Build Algorand Txn]
    C -->|Backend Wallet Signs| D[Algorand Network]
    D -->|Funds Deposited| E[Creator Wallet]
â›“ Algorand IntegrationSend Reward (Backend)Pythonfrom algosdk.v2client import algod
from algosdk import account, transaction

algod_client = algod.AlgodClient("", "https://testnet-api.algonode.cloud")

def send_reward(private_key, receiver, amount):
    params = algod_client.suggested_params()
    txn = transaction.PaymentTxn(
        sender=account.address_from_private_key(private_key),
        sp=params,
        receiver=receiver,
        amt=amount,
    )
    signed_txn = txn.sign(private_key)
    algod_client.send_transaction(signed_txn)
ğŸ—„ Database SchemaTablePurposeKey ColumnsusersUser accountsid, wallet_address, username, rolevideosVideo metadataid, creator_id, cid, title, ads_enabledviewsWatch eventsid, video_id, user_id, watch_secondscampaignsAd budgetsid, advertiser_id, budget, reward_per_view, statussettlementsReward tx logsid, amount, fee, tx_hash, statusğŸ”Œ API EndpointsğŸ” Auth & UsersMethodEndpointDescriptionAuth RequiredPOST/auth/challengeGet a signable challenge messageâŒPOST/auth/signupCreate account + verify signatureâŒPOST/auth/loginLogin + verify signatureâŒGET/auth/meGet current user infoâœ…ğŸ¬ Videos & ViewsMethodEndpointDescriptionAuth RequiredPOST/videos/uploadUpload video to IPFSâœ…GET/videos/listList all videosâŒGET/videos/meList user's videosâœ…GET/videos/{id}Get video by IDâŒPOST/views/trackTrack a video watch eventâœ…ğŸ“¢ Ad CampaignsMethodEndpointDescriptionAuth RequiredPOST/ads/createCreate ad campaign (multipart)âœ…GET/ads/activeGet active campaignsâŒGET/ads/meGet my campaignsâœ…POST/ads/banner/createCreate banner adâœ…GET/ads/summaryGet ad performance summaryâœ…ğŸ’¸ Settlements & WalletsMethodEndpointDescriptionAuth RequiredPOST/settlement/triggerTrigger video reward payoutâœ…GET/settlement/summaryGet settlement statsâŒGET/wallets/balanceGet user token balanceâœ…ğŸš€ Deployment & ConfigEnvironment VariablesVariableDescriptionExamplePINATA_API_KEYPinata API key for IPFS uploadsabc123...PINATA_SECRETPinata secret keyxyz789...ALGOD_NODEAlgorand node URLhttps://testnet-api.algonode.cloudBACKEND_PRIVATE_KEYAlgorand wallet private key (settlement)base64...JWT_SECRETSecret for signing JWTssupersecretDATABASE_URLPostgreSQL connection stringpostgresql://...VITE_API_BASE_URLBackend URL (frontend)https://your-backend.hf.spaceğŸ›¡ Security ModelFeatureImplementationChallenge ExpiryMessages expire after 2 minutesNonce StorageStored server-side, single-use to prevent replay attacksSignature VerificationVerified strictly with algosdk on the backendJWT LifetimeShort-lived (15 minutes)File UploadsValidated file types, strict size limits appliedView Anti-FraudDevice fingerprinting + minimum watch time requirementsğŸ—º Future Roadmap[ ] Smart contractâ€“controlled rewards[ ] ASA token launch (ADMC)[ ] Storage relayer staking[ ] Anti-bot AI detection[ ] On-chain creator balances[ ] Viewer token rewardsğŸ”„ Full System FlowCode snippetflowchart TD
    C(Creator) -->|1. Uploads Video| I(IPFS)
    I -->|2. Stores Video| B(Backend)
    V(Viewer) -->|3. Watches Video| B
    B -->|4. Verifies & Tracks View| R{Reward Engine}
    R -->|5. Calculates & Queues Payout| A[Algorand Blockchain]
    A -->|6. Settles Rewards| C
<div align="center">Built with ğŸ’› on AlgorandFrontend Â· Backend API Â· Algorand Explorer</div>
